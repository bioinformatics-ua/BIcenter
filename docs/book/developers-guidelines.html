<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Developers Guidelines | BIcenter: A collaborative Web ETL solution</title>
  <meta name="description" content="BIcenter is a web-based platform that allows the building and management of ETL pipelines, by non-IT users, in a multi-institution environment." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Developers Guidelines | BIcenter: A collaborative Web ETL solution" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="BIcenter is a web-based platform that allows the building and management of ETL pipelines, by non-IT users, in a multi-institution environment." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Developers Guidelines | BIcenter: A collaborative Web ETL solution" />
  
  <meta name="twitter:description" content="BIcenter is a web-based platform that allows the building and management of ETL pipelines, by non-IT users, in a multi-institution environment." />
  

<meta name="author" content="J. R. Almeida, L. Coelho and J. L. Oliveira" />


<meta name="date" content="2021-10-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="to-do.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://bioinformatics-ua.github.io/BIcenter/">BIcenter: A collaborative Web ETL solution</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#main-requirements"><i class="fa fa-check"></i><b>1.1</b> Main requirements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="to-do.html"><a href="to-do.html"><i class="fa fa-check"></i><b>2</b> To do</a>
<ul>
<li class="chapter" data-level="2.1" data-path="to-do.html"><a href="to-do.html#to-do-1"><i class="fa fa-check"></i><b>2.1</b> to do</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="developers-guidelines.html"><a href="developers-guidelines.html"><i class="fa fa-check"></i><b>3</b> Developers Guidelines</a>
<ul>
<li class="chapter" data-level="3.1" data-path="developers-guidelines.html"><a href="developers-guidelines.html#branching-convention"><i class="fa fa-check"></i><b>3.1</b> Branching Convention</a></li>
<li class="chapter" data-level="3.2" data-path="developers-guidelines.html"><a href="developers-guidelines.html#adding-an-rest-api-endpoint"><i class="fa fa-check"></i><b>3.2</b> Adding an REST API endpoint</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="developers-guidelines.html"><a href="developers-guidelines.html#example"><i class="fa fa-check"></i><b>3.2.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="developers-guidelines.html"><a href="developers-guidelines.html#adding-web-view"><i class="fa fa-check"></i><b>3.3</b> Adding web view</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="developers-guidelines.html"><a href="developers-guidelines.html#example-1"><i class="fa fa-check"></i><b>3.3.1</b> Example</a></li>
<li class="chapter" data-level="3.3.2" data-path="developers-guidelines.html"><a href="developers-guidelines.html#creation-of-a-new-base-view"><i class="fa fa-check"></i><b>3.3.2</b> Creation of a new (base) view</a></li>
<li class="chapter" data-level="3.3.3" data-path="developers-guidelines.html"><a href="developers-guidelines.html#creation-of-a-ui-component-handlebars"><i class="fa fa-check"></i><b>3.3.3</b> Creation of a UI component (handlebars)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="developers-guidelines.html"><a href="developers-guidelines.html#adding-new-pdi-step"><i class="fa fa-check"></i><b>3.4</b> Adding new PDI step</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="developers-guidelines.html"><a href="developers-guidelines.html#example-2"><i class="fa fa-check"></i><b>3.4.1</b> Example</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BIcenter: A collaborative Web ETL solution</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="developers-guidelines" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Developers Guidelines</h1>
<p>In this chapter, it is described the main guidelines for contributing to BIcenter.</p>
<div id="branching-convention" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Branching Convention</h2>
<p>After some consideration, we decided to implement naming conventions in the branches being created. We followed a scheme similar to the one referred at <a href="http://stackoverflow.com/a/6065944" class="uri">http://stackoverflow.com/a/6065944</a></p>
<p>Each branch name is composed of the following:</p>
<p><strong>category</strong>/<em>name</em></p>
<p>The possible categories are listed below.</p>
<table>
<colgroup>
<col width="10%" />
<col width="89%" />
</colgroup>
<thead>
<tr class="header">
<th>Category</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>bug</td>
<td>Bug fixing</td>
</tr>
<tr class="even">
<td>imp</td>
<td>Improvement on already existing features</td>
</tr>
<tr class="odd">
<td>new</td>
<td>New features being added</td>
</tr>
<tr class="even">
<td>wip</td>
<td>Works in progress - Big features that take long to implement and will probably hang there</td>
</tr>
<tr class="odd">
<td>junk</td>
<td>Throwaway branch created to experimentation</td>
</tr>
</tbody>
</table>
<p>The name should be concise, and directly represent what the branch solves.</p>
<p>Some examples:</p>
<p>bug/issue234</p>
<p>bug/fixeditdb</p>
<p>new/statistics</p>
<p>junk/tryingboostrap3</p>
</div>
<div id="adding-an-rest-api-endpoint" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Adding an REST API endpoint</h2>
<ol style="list-style-type: decimal">
<li><p>Create the endpoint at <code>app</code> &gt; <code>controllers</code>, either on one of the existent JAVA files or a new one if it handles a completely different topic/task, yet to be addressed.</p></li>
<li><p>Add the respective endpoint URL to:</p>
<ul>
<li><code>conf</code> &gt; <code>routes</code>, so that the system knows that endpoint exists;</li>
<li><code>app</code> &gt; <code>controllers</code> &gt; <code>Application.java</code> &gt; <code>javascriptRoutes()</code>, so you can use this URL dynamically at JavaScript, regarding frontend code.</li>
</ul></li>
</ol>
<p>Since the structure of this project includes both Frontend and Backend, when you create a REST API endpoint, you’ll probably consume it on some frontend feature. Here’s how to do that:</p>
<ol style="list-style-type: decimal">
<li><p>At <code>app</code> &gt; <code>javascripts</code> &gt; <code>services</code>, there is a collection of JS files that have all the encapsulated logic responsible for communicating with the REST API: one file for each major entity or group of actions. So, in one of these files or a new one, add the function that handles the communication you need with the REST API through your newly developed endpoint.</p></li>
<li><p>At the JS controller level of your functionality, you call the function specified in the previous step with the necessary arguments and information.</p></li>
</ol>
<div id="example" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Example</h3>
<p>This example assumes that there isn’t an endpoint capable of providing information about all the existent institutions. So the purpose is to create such endpoint and provide a function that allows us to consume it on the frontend. Hence, there are 2 phases: the <strong>creation of the REST API endpoint</strong> and the <strong>creation of the necessary utility to consume it</strong> on the frontend.</p>
<div id="creation-of-rest-api-endpoint" class="section level4" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Creation of REST API endpoint</h4>
<p>Because the endpoint we want to create has the purpose of returning the information about all existent institutions, it should be placed at <code>app</code> &gt; <code>controllers</code> &gt; <code>InstitutionController.java</code>, with some code like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="developers-guidelines.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Security</span><span class="op">.</span><span class="fu">Authenticated</span><span class="op">(</span>Secured<span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb1-2"><a href="developers-guidelines.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">@CheckPermission</span><span class="op">(</span>category <span class="op">=</span> Category<span class="op">.</span><span class="fu">INSTITUTION</span><span class="op">,</span> needs <span class="op">=</span> <span class="op">{</span><span class="bu">Operation</span><span class="op">.</span><span class="fu">GET</span><span class="op">})</span></span>
<span id="cb1-3"><a href="developers-guidelines.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">Result</span> <span class="fu">getInstitutions</span><span class="op">(){</span></span>
<span id="cb1-4"><a href="developers-guidelines.html#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> email <span class="op">=</span> <span class="fu">session</span><span class="op">().</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;userEmail&quot;</span><span class="op">);</span></span>
<span id="cb1-5"><a href="developers-guidelines.html#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>Institution<span class="op">&gt;</span> institutions <span class="op">=</span> institutionRepository<span class="op">.</span><span class="fu">list</span><span class="op">(</span>email<span class="op">);</span></span>
<span id="cb1-6"><a href="developers-guidelines.html#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="developers-guidelines.html#cb1-7" aria-hidden="true" tabindex="-1"></a>    ObjectMapper mapper <span class="op">=</span> <span class="kw">new</span> <span class="fu">ObjectMapper</span><span class="op">();</span></span>
<span id="cb1-8"><a href="developers-guidelines.html#cb1-8" aria-hidden="true" tabindex="-1"></a>    SimpleModule module <span class="op">=</span> <span class="kw">new</span> <span class="fu">SimpleModule</span><span class="op">();</span></span>
<span id="cb1-9"><a href="developers-guidelines.html#cb1-9" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="fu">addSerializer</span><span class="op">(</span>Institution<span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">InstitutionSerializer</span><span class="op">());</span></span>
<span id="cb1-10"><a href="developers-guidelines.html#cb1-10" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="fu">addSerializer</span><span class="op">(</span>Task<span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">SimpleTaskSerializer</span><span class="op">());</span></span>
<span id="cb1-11"><a href="developers-guidelines.html#cb1-11" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="fu">addSerializer</span><span class="op">(</span>Server<span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">ServerSerializer</span><span class="op">());</span></span>
<span id="cb1-12"><a href="developers-guidelines.html#cb1-12" aria-hidden="true" tabindex="-1"></a>    module<span class="op">.</span><span class="fu">addSerializer</span><span class="op">(</span><span class="bu">DataSource</span><span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">DataSourceSerializer</span><span class="op">());</span></span>
<span id="cb1-13"><a href="developers-guidelines.html#cb1-13" aria-hidden="true" tabindex="-1"></a>    mapper<span class="op">.</span><span class="fu">registerModule</span><span class="op">(</span>module<span class="op">);</span></span>
<span id="cb1-14"><a href="developers-guidelines.html#cb1-14" aria-hidden="true" tabindex="-1"></a>    Json<span class="op">.</span><span class="fu">setObjectMapper</span><span class="op">(</span>mapper<span class="op">);</span></span>
<span id="cb1-15"><a href="developers-guidelines.html#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="developers-guidelines.html#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">ok</span><span class="op">(</span>Json<span class="op">.</span><span class="fu">toJson</span><span class="op">(</span>institutions<span class="op">));</span></span>
<span id="cb1-17"><a href="developers-guidelines.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>After creating the endpoint, we need to make it discoverable (be available to the outside world). To do that, we add its URL to:
1. <code>conf</code> &gt; <code>routes</code>:</p>
<pre class="shell"><code>...
GET          /institution/list                    controllers.InstitutionController.getInstitutions()
...</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><code>app</code> &gt; <code>controllers</code> &gt; <code>Application.java</code> &gt; <code>javascriptRoutes()</code>:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="developers-guidelines.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">Result</span> <span class="fu">javascriptRoutes</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="developers-guidelines.html#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">response</span><span class="op">().</span><span class="fu">setHeader</span><span class="op">(</span>Http<span class="op">.</span><span class="fu">HeaderNames</span><span class="op">.</span><span class="fu">CONTENT_TYPE</span><span class="op">,</span> <span class="st">&quot;text/javascript&quot;</span><span class="op">);</span></span>
<span id="cb3-3"><a href="developers-guidelines.html#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">ok</span><span class="op">(</span>JavaScriptReverseRouter<span class="op">.</span><span class="fu">create</span><span class="op">(</span><span class="st">&quot;jsRoutes&quot;</span><span class="op">,</span></span>
<span id="cb3-4"><a href="developers-guidelines.html#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">...</span><span class="op">,</span></span>
<span id="cb3-5"><a href="developers-guidelines.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="developers-guidelines.html#cb3-6" aria-hidden="true" tabindex="-1"></a>        routes<span class="op">.</span><span class="fu">javascript</span><span class="op">.</span><span class="fu">InstitutionController</span><span class="op">.</span><span class="fu">getInstitutions</span><span class="op">(),</span></span>
<span id="cb3-7"><a href="developers-guidelines.html#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="developers-guidelines.html#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">...</span></span>
<span id="cb3-9"><a href="developers-guidelines.html#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">));</span></span>
<span id="cb3-10"><a href="developers-guidelines.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="creation-of-utility-function-to-consume-the-rest-endpoint" class="section level4" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> Creation of utility function to consume the REST endpoint</h4>
<p>This second phase explains how to create the referred utility function so we can more easily consume the developed endpoint. Since it’s an institution-related method, we will be adding the following utility function to <code>app</code> &gt; <code>javascripts</code> &gt; <code>services</code> &gt; <code>institution.js</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="developers-guidelines.html#cb4-1" aria-hidden="true" tabindex="-1"></a>Institution<span class="op">.</span><span class="at">getInstitutions</span> <span class="op">=</span> <span class="kw">function</span> (callback) {</span>
<span id="cb4-2"><a href="developers-guidelines.html#cb4-2" aria-hidden="true" tabindex="-1"></a>    jsRoutes<span class="op">.</span><span class="at">controllers</span><span class="op">.</span><span class="at">InstitutionController</span><span class="op">.</span><span class="fu">getInstitutions</span>()<span class="op">.</span><span class="fu">ajax</span>({</span>
<span id="cb4-3"><a href="developers-guidelines.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">contentType</span><span class="op">:</span> <span class="st">&#39;application/json; charset=utf-8&#39;</span><span class="op">,</span></span>
<span id="cb4-4"><a href="developers-guidelines.html#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">success</span><span class="op">:</span> <span class="kw">function</span> (response) {</span>
<span id="cb4-5"><a href="developers-guidelines.html#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (callback) {</span>
<span id="cb4-6"><a href="developers-guidelines.html#cb4-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">callback</span>(response)<span class="op">;</span></span>
<span id="cb4-7"><a href="developers-guidelines.html#cb4-7" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb4-8"><a href="developers-guidelines.html#cb4-8" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb4-9"><a href="developers-guidelines.html#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">error</span><span class="op">:</span> <span class="kw">function</span> (response) {</span>
<span id="cb4-10"><a href="developers-guidelines.html#cb4-10" aria-hidden="true" tabindex="-1"></a>            <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;Error in Institution service&#39;</span><span class="op">,</span> response)<span class="op">;</span></span>
<span id="cb4-11"><a href="developers-guidelines.html#cb4-11" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb4-12"><a href="developers-guidelines.html#cb4-12" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb4-13"><a href="developers-guidelines.html#cb4-13" aria-hidden="true" tabindex="-1"></a> }<span class="op">;</span></span></code></pre></div>
<p>This consumes the endpoint and, on success calls the specified callback function; otherwise (on fail) displays an error message on your browser’s console.</p>
<p>After this, the final part is to consume this utility function, which can also be called a service. A simple example is to use the service on your javascript file that bears the “backend” responsibility of your UI component/view, in a similar way to the following code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="developers-guidelines.html#cb5-1" aria-hidden="true" tabindex="-1"></a>Institution<span class="op">.</span><span class="fu">getInstitutions</span>(<span class="kw">function</span> (institutions) {</span>
<span id="cb5-2"><a href="developers-guidelines.html#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// do whatever you need with the returned information</span></span>
<span id="cb5-3"><a href="developers-guidelines.html#cb5-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</div>
</div>
</div>
<div id="adding-web-view" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Adding web view</h2>
<p>If you want to create an entirely new base schema (a view), you first need to add a base template name <code>&lt;name&gt;.scala.html</code> to <code>app</code> &gt; <code>views</code>. You also need to make sure that you have an endpoint on JAVA code that handles your request and returns this web view (the “<strong>backend</strong>” process is similar to create a REST API endpoint).</p>
<p>If you just want to create a new UI stage, based on an already defined view, follow these steps:
1. Create an endpoint (and register it) that returns the base view you want to use.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>At <code>app</code> &gt; <code>assets</code> &gt; <code>javascripts</code>, create the controller and view associated with your new UI stage (the view JS file handles the stuff UI related and the controller handles the stuff Backend related).</p></li>
<li><p>At <code>app</code> &gt; <code>assets</code> &gt; <code>templates</code>, create a file named <code>&lt;name&gt;.handlebars</code> where you’ll insert the UI code that will be dynamically added to the main div container of your base web view.</p></li>
<li><p>After all these files are ready, you need to make sure the framework knows the path to everything you created, so you’ll need to add the paths to your view and controller javascript files in the file <code>app</code> &gt; <code>assets</code> &gt; <code>javacripts</code> &gt; <code>main.js</code>.</p></li>
<li><p>Finally, you’ll need to add the RegExp handler that will assemble the resources you need (variables and controllers) at <code>app</code> &gt; <code>assets</code> &gt; <code>application</code> &gt; <code>application.js</code>.</p></li>
</ol>
<div id="example-1" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Example</h3>
<p>This example is going to be divided into two big parts: the <strong>creation of a new view from scratch</strong> and the <strong>creation of a UI component</strong> (through handlebars).</p>
<p>Let’s take as an example the creation of a dashboard page, given the fact that we need to create a new base-view from scratch.</p>
<p><strong>NOTE:</strong> if you just want to create a new UI component, with handlebars, jump to the second part.</p>
</div>
<div id="creation-of-a-new-base-view" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Creation of a new (base) view</h3>
<p>To create a new view to use as a base to new UI stages, you first need to add the HTML template. So, add your view structure to a file named <code>home.scala.html</code>, for the sake of this example, at <code>app</code> &gt; <code>views</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="developers-guidelines.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb6-2"><a href="developers-guidelines.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="developers-guidelines.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb6-4"><a href="developers-guidelines.html#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;head&gt;</span></span>
<span id="cb6-5"><a href="developers-guidelines.html#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;meta</span> <span class="er">charset</span><span class="ot">=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-6"><a href="developers-guidelines.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span> <span class="er">http-equiv</span><span class="ot">=</span><span class="st">&quot;X-UA-Compatible&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;IE=edge&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-7"><a href="developers-guidelines.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Tell the browser to be responsive to screen width --&gt;</span></span>
<span id="cb6-8"><a href="developers-guidelines.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;viewport&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-9"><a href="developers-guidelines.html#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="developers-guidelines.html#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>BIcenter<span class="kw">&lt;/title&gt;</span></span>
<span id="cb6-11"><a href="developers-guidelines.html#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="developers-guidelines.html#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Boostrap Select2 --&gt;</span></span>
<span id="cb6-13"><a href="developers-guidelines.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/select2/select2.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-14"><a href="developers-guidelines.html#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="developers-guidelines.html#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Font Awesome --&gt;</span></span>
<span id="cb6-16"><a href="developers-guidelines.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/font-awesome/css/font-awesome.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-17"><a href="developers-guidelines.html#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- PNotify --&gt;</span></span>
<span id="cb6-18"><a href="developers-guidelines.html#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/pnotify/pnotify.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-19"><a href="developers-guidelines.html#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/pnotify/pnotify.nonblock.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-20"><a href="developers-guidelines.html#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- query-builder --&gt;</span></span>
<span id="cb6-21"><a href="developers-guidelines.html#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/jQuery-QueryBuilder/css/query-builder.default.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-22"><a href="developers-guidelines.html#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="developers-guidelines.html#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;shortcut icon&quot;</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;image/png&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">images/favicon.png&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-24"><a href="developers-guidelines.html#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="developers-guidelines.html#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!--DataTable dependencies --&gt;</span></span>
<span id="cb6-26"><a href="developers-guidelines.html#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/datatables/dataTables.bootstrap.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-27"><a href="developers-guidelines.html#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/datatables/buttons.dataTables.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-28"><a href="developers-guidelines.html#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="developers-guidelines.html#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- jQuery UI --&gt;</span></span>
<span id="cb6-30"><a href="developers-guidelines.html#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/jquery-ui/jquery-ui.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-31"><a href="developers-guidelines.html#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="developers-guidelines.html#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Boostrap DateTime-Picker --&gt;</span></span>
<span id="cb6-33"><a href="developers-guidelines.html#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-34"><a href="developers-guidelines.html#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="developers-guidelines.html#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- iCheck --&gt;</span></span>
<span id="cb6-36"><a href="developers-guidelines.html#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/iCheck/all.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-37"><a href="developers-guidelines.html#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/iCheck/square/blue.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-38"><a href="developers-guidelines.html#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="developers-guidelines.html#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Main CSS: Bootstrap + AdminLTE + Custom css --&gt;</span></span>
<span id="cb6-40"><a href="developers-guidelines.html#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">media</span><span class="ot">=</span><span class="st">&quot;screen&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">stylesheets/main.min.css&quot;)&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-41"><a href="developers-guidelines.html#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/head&gt;</span></span>
<span id="cb6-42"><a href="developers-guidelines.html#cb6-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;body</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;height:auto;&quot;</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;skin-darkblue-light fixed home-page&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-43"><a href="developers-guidelines.html#cb6-43" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/mxgraph2/js/mxClient.js&quot;)&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb6-44"><a href="developers-guidelines.html#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">editor/editor.js&quot;)&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb6-45"><a href="developers-guidelines.html#cb6-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">editor/graph.js&quot;)&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb6-46"><a href="developers-guidelines.html#cb6-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-47"><a href="developers-guidelines.html#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;container&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-48"><a href="developers-guidelines.html#cb6-48" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span> <span class="er">module</span><span class="ot">=</span><span class="st">&quot;HeaderModule&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-49"><a href="developers-guidelines.html#cb6-49" aria-hidden="true" tabindex="-1"></a>            @header()</span>
<span id="cb6-50"><a href="developers-guidelines.html#cb6-50" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb6-51"><a href="developers-guidelines.html#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="developers-guidelines.html#cb6-52" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span> <span class="er">module</span><span class="ot">=</span><span class="st">&quot;MainModule&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-53"><a href="developers-guidelines.html#cb6-53" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;div</span> <span class="er">controller</span><span class="ot">=</span><span class="st">&quot;HomeController&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb6-54"><a href="developers-guidelines.html#cb6-54" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb6-55"><a href="developers-guidelines.html#cb6-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-56"><a href="developers-guidelines.html#cb6-56" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;navbar-fixed-bottom&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-57"><a href="developers-guidelines.html#cb6-57" aria-hidden="true" tabindex="-1"></a>            @footer()</span>
<span id="cb6-58"><a href="developers-guidelines.html#cb6-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb6-59"><a href="developers-guidelines.html#cb6-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb6-60"><a href="developers-guidelines.html#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="developers-guidelines.html#cb6-61" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span> <span class="er">data-main</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">javascripts/main&quot;)&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;@routes.Assets.versioned(&quot;</span><span class="er">lib/requirejs/require.min.js&quot;)&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb6-62"><a href="developers-guidelines.html#cb6-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/body&gt;</span></span>
<span id="cb6-63"><a href="developers-guidelines.html#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>After creating the template, you now need to create an endpoint to return this view and register it in the system.</p>
<p>So, to create the endpoint you add a new controller at <code>app</code> &gt; <code>controllers</code> or add a function to an existent controller. In this example we will create a new controller called <code>HomeController.java</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="developers-guidelines.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> HomeController <span class="kw">extends</span> Controller <span class="op">{</span></span>
<span id="cb7-2"><a href="developers-guidelines.html#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Security</span><span class="op">.</span><span class="fu">Authenticated</span><span class="op">(</span>Secured<span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb7-3"><a href="developers-guidelines.html#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Result</span> <span class="fu">index</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="developers-guidelines.html#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">ok</span><span class="op">(</span>views<span class="op">.</span><span class="fu">html</span><span class="op">.</span><span class="fu">home</span><span class="op">.</span><span class="fu">render</span><span class="op">());</span></span>
<span id="cb7-5"><a href="developers-guidelines.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-6"><a href="developers-guidelines.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>And, then, to register it, add to:
1. <code>conf</code> &gt; <code>routes</code>:</p>
<pre class="shell"><code>...

GET               /home                    controllers.HomeController.index()

...</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><code>app</code> &gt; <code>controllers</code> &gt; <code>Application.java</code> &gt; <code>javascriptRoutes()</code>:</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="developers-guidelines.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">Result</span> <span class="fu">javascriptRoutes</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-2"><a href="developers-guidelines.html#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">response</span><span class="op">().</span><span class="fu">setHeader</span><span class="op">(</span>Http<span class="op">.</span><span class="fu">HeaderNames</span><span class="op">.</span><span class="fu">CONTENT_TYPE</span><span class="op">,</span> <span class="st">&quot;text/javascript&quot;</span><span class="op">);</span></span>
<span id="cb9-3"><a href="developers-guidelines.html#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">ok</span><span class="op">(</span>JavaScriptReverseRouter<span class="op">.</span><span class="fu">create</span><span class="op">(</span><span class="st">&quot;jsRoutes&quot;</span><span class="op">,</span></span>
<span id="cb9-4"><a href="developers-guidelines.html#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">...</span><span class="op">,</span></span>
<span id="cb9-5"><a href="developers-guidelines.html#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="developers-guidelines.html#cb9-6" aria-hidden="true" tabindex="-1"></a>        routes<span class="op">.</span><span class="fu">javascript</span><span class="op">.</span><span class="fu">HomeController</span><span class="op">.</span><span class="fu">index</span><span class="op">(),</span></span>
<span id="cb9-7"><a href="developers-guidelines.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="developers-guidelines.html#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">...</span></span>
<span id="cb9-9"><a href="developers-guidelines.html#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">));</span></span>
<span id="cb9-10"><a href="developers-guidelines.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="creation-of-a-ui-component-handlebars" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Creation of a UI component (handlebars)</h3>
<p>Once the URL for the base view is configured, the next step is to create the functional files that handle frontend and backend of the UI element. So, we will create a folder <code>home</code> at <code>app</code> &gt; <code>assets</code> &gt; <code>javascripts</code>. Inside this folder create tho files: <code>homeController.js</code> and <code>homeView.js</code>.</p>
<p>The <code>homeController.js</code> is responsible to handle the backend operations and should follow a structure similar to this:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="developers-guidelines.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">define</span>(<span class="st">&#39;HomeController&#39;</span><span class="op">,</span> [<span class="st">&#39;Controller&#39;</span><span class="op">,</span> <span class="st">&#39;HomeView&#39;</span><span class="op">,</span> <span class="st">&#39;Router&#39;</span><span class="op">,</span> <span class="st">&#39;Institution&#39;</span><span class="op">,</span> <span class="st">&#39;Task&#39;</span><span class="op">,</span> <span class="st">&#39;Alert&#39;</span><span class="op">,</span> <span class="st">&#39;jquery&#39;</span><span class="op">,</span> <span class="st">&#39;jsRoutes&#39;</span><span class="op">,</span> <span class="st">&#39;jquery-cookie&#39;</span>]<span class="op">,</span> <span class="kw">function</span> (Controller<span class="op">,</span> HomeView<span class="op">,</span> Router<span class="op">,</span> Institution<span class="op">,</span> Task<span class="op">,</span> Alert<span class="op">,</span> $<span class="op">,</span> jsRoutes) {</span>
<span id="cb10-2"><a href="developers-guidelines.html#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> HomeController <span class="op">=</span> <span class="kw">function</span> (module) {</span>
<span id="cb10-3"><a href="developers-guidelines.html#cb10-3" aria-hidden="true" tabindex="-1"></a>        Controller<span class="op">.</span><span class="fu">call</span>(<span class="kw">this</span><span class="op">,</span> module<span class="op">,</span> <span class="kw">new</span> <span class="fu">HomeView</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb10-4"><a href="developers-guidelines.html#cb10-4" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb10-5"><a href="developers-guidelines.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="developers-guidelines.html#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Inheritance from the superclass</span></span>
<span id="cb10-7"><a href="developers-guidelines.html#cb10-7" aria-hidden="true" tabindex="-1"></a>    HomeController<span class="op">.</span><span class="at">prototype</span> <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>(Controller<span class="op">.</span><span class="at">prototype</span>)<span class="op">;</span></span>
<span id="cb10-8"><a href="developers-guidelines.html#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> _super_ <span class="op">=</span> Controller<span class="op">.</span><span class="at">prototype</span><span class="op">;</span></span>
<span id="cb10-9"><a href="developers-guidelines.html#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="developers-guidelines.html#cb10-10" aria-hidden="true" tabindex="-1"></a>    HomeController<span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">initialize</span> <span class="op">=</span> <span class="kw">function</span> ($container) {</span>
<span id="cb10-11"><a href="developers-guidelines.html#cb10-11" aria-hidden="true" tabindex="-1"></a>        _super_<span class="op">.</span><span class="at">initialize</span><span class="op">.</span><span class="fu">call</span>(<span class="kw">this</span><span class="op">,</span> $container)<span class="op">;</span></span>
<span id="cb10-12"><a href="developers-guidelines.html#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="developers-guidelines.html#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">getTasks</span>()<span class="op">;</span></span>
<span id="cb10-14"><a href="developers-guidelines.html#cb10-14" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb10-15"><a href="developers-guidelines.html#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="developers-guidelines.html#cb10-16" aria-hidden="true" tabindex="-1"></a>    HomeController<span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">getTasks</span> <span class="op">=</span> <span class="kw">function</span> () {</span>
<span id="cb10-17"><a href="developers-guidelines.html#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> context <span class="op">=</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb10-18"><a href="developers-guidelines.html#cb10-18" aria-hidden="true" tabindex="-1"></a>    Institution<span class="op">.</span><span class="fu">getInstitutions</span>(<span class="kw">function</span> (institutions) {</span>
<span id="cb10-19"><a href="developers-guidelines.html#cb10-19" aria-hidden="true" tabindex="-1"></a>        context<span class="op">.</span><span class="at">view</span><span class="op">.</span><span class="fu">loadInstitutions</span>(institutions)<span class="op">;</span></span>
<span id="cb10-20"><a href="developers-guidelines.html#cb10-20" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb10-21"><a href="developers-guidelines.html#cb10-21" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb10-22"><a href="developers-guidelines.html#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="developers-guidelines.html#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> HomeController<span class="op">;</span></span>
<span id="cb10-24"><a href="developers-guidelines.html#cb10-24" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>On the other hand, the <code>homeView.js</code>is responsible for frontend interactions and should follow a structure similar to:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="developers-guidelines.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">define</span>(<span class="st">&#39;HomeView&#39;</span><span class="op">,</span> [<span class="st">&#39;jquery&#39;</span><span class="op">,</span> <span class="st">&#39;View&#39;</span>]<span class="op">,</span> <span class="kw">function</span> ($<span class="op">,</span> View) {</span>
<span id="cb11-2"><a href="developers-guidelines.html#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> HomeView <span class="op">=</span> <span class="kw">function</span> (controller) {</span>
<span id="cb11-3"><a href="developers-guidelines.html#cb11-3" aria-hidden="true" tabindex="-1"></a>        View<span class="op">.</span><span class="fu">call</span>(<span class="kw">this</span><span class="op">,</span> controller<span class="op">,</span> <span class="st">&#39;home&#39;</span>)<span class="op">;</span></span>
<span id="cb11-4"><a href="developers-guidelines.html#cb11-4" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb11-5"><a href="developers-guidelines.html#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="developers-guidelines.html#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Inheritance from super class</span></span>
<span id="cb11-7"><a href="developers-guidelines.html#cb11-7" aria-hidden="true" tabindex="-1"></a>    HomeView<span class="op">.</span><span class="at">prototype</span> <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>(View<span class="op">.</span><span class="at">prototype</span>)<span class="op">;</span></span>
<span id="cb11-8"><a href="developers-guidelines.html#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> _super_ <span class="op">=</span> View<span class="op">.</span><span class="at">prototype</span><span class="op">;</span></span>
<span id="cb11-9"><a href="developers-guidelines.html#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="developers-guidelines.html#cb11-10" aria-hidden="true" tabindex="-1"></a>    HomeView<span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">initialize</span> <span class="op">=</span> <span class="kw">function</span> ($container) {</span>
<span id="cb11-11"><a href="developers-guidelines.html#cb11-11" aria-hidden="true" tabindex="-1"></a>        _super_<span class="op">.</span><span class="at">initialize</span><span class="op">.</span><span class="fu">call</span>(<span class="kw">this</span><span class="op">,</span> $container)<span class="op">;</span></span>
<span id="cb11-12"><a href="developers-guidelines.html#cb11-12" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb11-13"><a href="developers-guidelines.html#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="developers-guidelines.html#cb11-14" aria-hidden="true" tabindex="-1"></a>    HomeView<span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">loadInstitutions</span> <span class="op">=</span> <span class="kw">function</span> (institutions) {</span>
<span id="cb11-15"><a href="developers-guidelines.html#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> html <span class="op">=</span> JST[<span class="st">&#39;home&#39;</span>]({</span>
<span id="cb11-16"><a href="developers-guidelines.html#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">institutions</span><span class="op">:</span> institutions</span>
<span id="cb11-17"><a href="developers-guidelines.html#cb11-17" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb11-18"><a href="developers-guidelines.html#cb11-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">$container</span><span class="op">.</span><span class="fu">html</span>(html)<span class="op">;</span></span>
<span id="cb11-19"><a href="developers-guidelines.html#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">_loadViewComponents</span>()<span class="op">;</span></span>
<span id="cb11-20"><a href="developers-guidelines.html#cb11-20" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb11-21"><a href="developers-guidelines.html#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="developers-guidelines.html#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> HomeView<span class="op">;</span></span>
<span id="cb11-23"><a href="developers-guidelines.html#cb11-23" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>As can be seen in this last code snippet, we “import” a web (HTML) structure from <code>'home'</code>. This refers to the file <code>home.handlebars</code> that must be placed at <code>app</code> &gt; <code>assets</code> &gt; <code>templates</code>. Hence, we will create this exact file in the specified location with the following content:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb12-1"><a href="developers-guidelines.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;main-div&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-2"><a href="developers-guidelines.html#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;title&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-3"><a href="developers-guidelines.html#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;h1&gt;&lt;b&gt;&lt;i</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fa fa-hospital-o&quot;</span><span class="kw">&gt;&lt;/i&gt;</span> Dashboard: Resources<span class="kw">&lt;/b&gt;&lt;/h1&gt;</span></span>
<span id="cb12-4"><a href="developers-guidelines.html#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-5"><a href="developers-guidelines.html#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="developers-guidelines.html#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;institutions&quot;</span> <span class="er">view-element</span><span class="ot">=</span><span class="st">&quot;institutions&quot;</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-7"><a href="developers-guidelines.html#cb12-7" aria-hidden="true" tabindex="-1"></a>        {{#institutions}}</span>
<span id="cb12-8"><a href="developers-guidelines.html#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;institution col-lg-4&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-9"><a href="developers-guidelines.html#cb12-9" aria-hidden="true" tabindex="-1"></a>                <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;panel panel-default&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-10"><a href="developers-guidelines.html#cb12-10" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;panel-heading&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-11"><a href="developers-guidelines.html#cb12-11" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">&lt;h3</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;panel-title&quot;</span><span class="kw">&gt;&lt;b&gt;</span>{{name}}<span class="kw">&lt;/b&gt;&lt;/h3&gt;</span></span>
<span id="cb12-12"><a href="developers-guidelines.html#cb12-12" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-13"><a href="developers-guidelines.html#cb12-13" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;panel-body&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-14"><a href="developers-guidelines.html#cb12-14" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">&lt;ul</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;treeview-menu&quot;</span> <span class="er">data-widget</span><span class="ot">=</span><span class="st">&quot;tree&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-15"><a href="developers-guidelines.html#cb12-15" aria-hidden="true" tabindex="-1"></a>                            <span class="co">&lt;!-- Tasks --&gt;</span></span>
<span id="cb12-16"><a href="developers-guidelines.html#cb12-16" aria-hidden="true" tabindex="-1"></a>                            <span class="kw">&lt;li</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;treeview menu&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-17"><a href="developers-guidelines.html#cb12-17" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">&lt;a</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;tasks&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-18"><a href="developers-guidelines.html#cb12-18" aria-hidden="true" tabindex="-1"></a>                                    <span class="kw">&lt;i</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fa fa-folder&quot;</span><span class="kw">&gt;&lt;/i&gt;</span> <span class="kw">&lt;span&gt;</span>Tasks<span class="kw">&lt;/span&gt;</span></span>
<span id="cb12-19"><a href="developers-guidelines.html#cb12-19" aria-hidden="true" tabindex="-1"></a>                                    <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;pull-right-container&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-20"><a href="developers-guidelines.html#cb12-20" aria-hidden="true" tabindex="-1"></a>                                    <span class="kw">&lt;i</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fa fa-angle-left pull-right&quot;</span><span class="kw">&gt;&lt;/i&gt;</span></span>
<span id="cb12-21"><a href="developers-guidelines.html#cb12-21" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">&lt;/span&gt;</span></span>
<span id="cb12-22"><a href="developers-guidelines.html#cb12-22" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">&lt;/a&gt;</span></span>
<span id="cb12-23"><a href="developers-guidelines.html#cb12-23" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">&lt;ul</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;treeview-menu&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-24"><a href="developers-guidelines.html#cb12-24" aria-hidden="true" tabindex="-1"></a>                                    {{#tasks}}</span>
<span id="cb12-25"><a href="developers-guidelines.html#cb12-25" aria-hidden="true" tabindex="-1"></a>                                        <span class="kw">&lt;li&gt;</span></span>
<span id="cb12-26"><a href="developers-guidelines.html#cb12-26" aria-hidden="true" tabindex="-1"></a>                                            <span class="kw">&lt;a</span> <span class="er">&lt;i</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fa fa-file-text-o&quot;</span><span class="kw">&gt;&lt;/i&gt;</span></span>
<span id="cb12-27"><a href="developers-guidelines.html#cb12-27" aria-hidden="true" tabindex="-1"></a>                                                <span class="kw">&lt;span&gt;</span>{{name}}<span class="kw">&lt;/span&gt;</span></span>
<span id="cb12-28"><a href="developers-guidelines.html#cb12-28" aria-hidden="true" tabindex="-1"></a>                                            <span class="kw">&lt;/a&gt;</span></span>
<span id="cb12-29"><a href="developers-guidelines.html#cb12-29" aria-hidden="true" tabindex="-1"></a>                                        <span class="kw">&lt;/li&gt;</span></span>
<span id="cb12-30"><a href="developers-guidelines.html#cb12-30" aria-hidden="true" tabindex="-1"></a>                                    {{/tasks}}</span>
<span id="cb12-31"><a href="developers-guidelines.html#cb12-31" aria-hidden="true" tabindex="-1"></a>                                    <span class="kw">&lt;li&gt;</span></span>
<span id="cb12-32"><a href="developers-guidelines.html#cb12-32" aria-hidden="true" tabindex="-1"></a>                                        <span class="kw">&lt;form</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;sidebar-form&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-33"><a href="developers-guidelines.html#cb12-33" aria-hidden="true" tabindex="-1"></a>                                            <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;input-group&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-34"><a href="developers-guidelines.html#cb12-34" aria-hidden="true" tabindex="-1"></a>                                                <span class="kw">&lt;input</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;taskName&quot;</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;form-control&quot;</span> <span class="er">placeholder</span><span class="ot">=</span><span class="st">&quot;Create a new task...&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb12-35"><a href="developers-guidelines.html#cb12-35" aria-hidden="true" tabindex="-1"></a>                                                <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;input-group-btn&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-36"><a href="developers-guidelines.html#cb12-36" aria-hidden="true" tabindex="-1"></a>                                                <span class="kw">&lt;button</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;submit&quot;</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;btn btn-flat&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-37"><a href="developers-guidelines.html#cb12-37" aria-hidden="true" tabindex="-1"></a>                                                    <span class="kw">&lt;i</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fa fa-plus-circle&quot;</span><span class="kw">&gt;&lt;/i&gt;</span></span>
<span id="cb12-38"><a href="developers-guidelines.html#cb12-38" aria-hidden="true" tabindex="-1"></a>                                                <span class="kw">&lt;/button&gt;</span></span>
<span id="cb12-39"><a href="developers-guidelines.html#cb12-39" aria-hidden="true" tabindex="-1"></a>                                        <span class="kw">&lt;/span&gt;</span></span>
<span id="cb12-40"><a href="developers-guidelines.html#cb12-40" aria-hidden="true" tabindex="-1"></a>                                            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-41"><a href="developers-guidelines.html#cb12-41" aria-hidden="true" tabindex="-1"></a>                                        <span class="kw">&lt;/form&gt;</span></span>
<span id="cb12-42"><a href="developers-guidelines.html#cb12-42" aria-hidden="true" tabindex="-1"></a>                                    <span class="kw">&lt;/li&gt;</span></span>
<span id="cb12-43"><a href="developers-guidelines.html#cb12-43" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">&lt;/ul&gt;</span></span>
<span id="cb12-44"><a href="developers-guidelines.html#cb12-44" aria-hidden="true" tabindex="-1"></a>                            <span class="kw">&lt;/li&gt;</span></span>
<span id="cb12-45"><a href="developers-guidelines.html#cb12-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-46"><a href="developers-guidelines.html#cb12-46" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">&lt;/ul&gt;</span></span>
<span id="cb12-47"><a href="developers-guidelines.html#cb12-47" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-48"><a href="developers-guidelines.html#cb12-48" aria-hidden="true" tabindex="-1"></a>                <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-49"><a href="developers-guidelines.html#cb12-49" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-50"><a href="developers-guidelines.html#cb12-50" aria-hidden="true" tabindex="-1"></a>        {{/institutions}}</span>
<span id="cb12-51"><a href="developers-guidelines.html#cb12-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-52"><a href="developers-guidelines.html#cb12-52" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>The next step is to tell the system where the newly-created resources are. So, at <code>app</code> &gt; <code>assets</code> &gt; <code>javacripts</code> &gt; <code>main.js</code> add the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="developers-guidelines.html#cb13-1" aria-hidden="true" tabindex="-1"></a>requirejs<span class="op">.</span><span class="fu">config</span>({</span>
<span id="cb13-2"><a href="developers-guidelines.html#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;/assets/javascripts&#39;</span><span class="op">,</span></span>
<span id="cb13-3"><a href="developers-guidelines.html#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">paths</span><span class="op">:</span> {</span>
<span id="cb13-4"><a href="developers-guidelines.html#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">...,</span></span>
<span id="cb13-5"><a href="developers-guidelines.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="developers-guidelines.html#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Home</span></span>
<span id="cb13-7"><a href="developers-guidelines.html#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;HomeController&#39;</span><span class="op">:</span> <span class="st">&#39;home/controllers/homeController&#39;</span><span class="op">,</span></span>
<span id="cb13-8"><a href="developers-guidelines.html#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;HomeView&#39;</span><span class="op">:</span> <span class="st">&#39;home/views/homeView&#39;</span><span class="op">,</span></span>
<span id="cb13-9"><a href="developers-guidelines.html#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="developers-guidelines.html#cb13-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb13-11"><a href="developers-guidelines.html#cb13-11" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb13-12"><a href="developers-guidelines.html#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb13-13"><a href="developers-guidelines.html#cb13-13" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb13-14"><a href="developers-guidelines.html#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="developers-guidelines.html#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> DEBUG <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb13-16"><a href="developers-guidelines.html#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="developers-guidelines.html#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="pp">require</span>([<span class="st">&#39;Application&#39;</span>]<span class="op">,</span> <span class="kw">function</span> (Application) {</span>
<span id="cb13-18"><a href="developers-guidelines.html#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="at">app</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Application</span>()<span class="op">;</span></span>
<span id="cb13-19"><a href="developers-guidelines.html#cb13-19" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Last, but not least, we have to create the RegExp handler, as said earlier, so the system know what controllers and tools to load in the specific UI stage, at <code>app</code> &gt; <code>assets</code> &gt; <code>application</code> &gt; <code>application.js</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="developers-guidelines.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">define</span>(<span class="st">&#39;Application&#39;</span><span class="op">,</span> [<span class="st">&#39;jquery&#39;</span><span class="op">,</span> <span class="st">&#39;Router&#39;</span><span class="op">,</span> <span class="st">&#39;Module&#39;</span><span class="op">,</span> <span class="st">&#39;jsRoutes&#39;</span><span class="op">,</span> <span class="st">&#39;Svg&#39;</span><span class="op">,</span> <span class="st">&#39;Institution&#39;</span><span class="op">,</span> <span class="st">&#39;adminLTE&#39;</span><span class="op">,</span> <span class="st">&#39;custom.jquery&#39;</span>]<span class="op">,</span> <span class="kw">function</span> ($<span class="op">,</span> Router<span class="op">,</span> Module<span class="op">,</span> jsRoutes<span class="op">,</span> Svg<span class="op">,</span> Institution) {</span>
<span id="cb14-2"><a href="developers-guidelines.html#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb14-3"><a href="developers-guidelines.html#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="developers-guidelines.html#cb14-4" aria-hidden="true" tabindex="-1"></a>    Application<span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">initialize</span> <span class="op">=</span> <span class="kw">function</span> () {</span>
<span id="cb14-5"><a href="developers-guidelines.html#cb14-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> self <span class="op">=</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb14-6"><a href="developers-guidelines.html#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="developers-guidelines.html#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Configure router</span></span>
<span id="cb14-8"><a href="developers-guidelines.html#cb14-8" aria-hidden="true" tabindex="-1"></a>    Router<span class="op">.</span><span class="fu">config</span>({<span class="dt">mode</span><span class="op">:</span> <span class="st">&#39;history&#39;</span>})<span class="op">;</span></span>
<span id="cb14-9"><a href="developers-guidelines.html#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="developers-guidelines.html#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add routes</span></span>
<span id="cb14-11"><a href="developers-guidelines.html#cb14-11" aria-hidden="true" tabindex="-1"></a>    Router</span>
<span id="cb14-12"><a href="developers-guidelines.html#cb14-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">add</span>(<span class="kw">new</span> <span class="bu">RegExp</span>(jsRoutes<span class="op">.</span><span class="at">controllers</span><span class="op">.</span><span class="at">login</span><span class="op">.</span><span class="at">Login</span><span class="op">.</span><span class="fu">index</span>()<span class="op">.</span><span class="at">url</span><span class="op">.</span><span class="fu">substr</span>(<span class="dv">1</span>)<span class="op">,</span> <span class="st">&#39;i&#39;</span>)<span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb14-13"><a href="developers-guidelines.html#cb14-13" aria-hidden="true" tabindex="-1"></a>            <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;LOGIN PAGE&quot;</span>)<span class="op">;</span></span>
<span id="cb14-14"><a href="developers-guidelines.html#cb14-14" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb14-15"><a href="developers-guidelines.html#cb14-15" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span></span>
<span id="cb14-16"><a href="developers-guidelines.html#cb14-16" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">add</span>(<span class="kw">new</span> <span class="bu">RegExp</span>(jsRoutes<span class="op">.</span><span class="at">controllers</span><span class="op">.</span><span class="at">HomeController</span><span class="op">.</span><span class="fu">index</span>()<span class="op">.</span><span class="at">url</span><span class="op">.</span><span class="fu">substr</span>(<span class="dv">1</span>)<span class="op">,</span> <span class="st">&#39;i&#39;</span>)<span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb14-17"><a href="developers-guidelines.html#cb14-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;homepage&quot;</span>)<span class="op">;</span></span>
<span id="cb14-18"><a href="developers-guidelines.html#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="developers-guidelines.html#cb14-19" aria-hidden="true" tabindex="-1"></a>            self<span class="op">.</span><span class="fu">loadControllers</span>(<span class="st">&#39;MainModule&#39;</span><span class="op">,</span> [<span class="st">&#39;HomeController&#39;</span>])<span class="op">;</span></span>
<span id="cb14-20"><a href="developers-guidelines.html#cb14-20" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb14-21"><a href="developers-guidelines.html#cb14-21" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb14-22"><a href="developers-guidelines.html#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="developers-guidelines.html#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb14-24"><a href="developers-guidelines.html#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="developers-guidelines.html#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Application<span class="op">;</span></span>
<span id="cb14-26"><a href="developers-guidelines.html#cb14-26" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>With this, we will be able to have a web page similar to this image, based on an entirely new HTML template:</p>
<div class="figure"><span style="display:block;" id="fig:view"></span>
<img src="images/view.png" alt="View" width="100%" />
<p class="caption">
Figure 3.1: New HTML view created using a new UI component following the handlebars pattern.
</p>
</div>
</div>
</div>
<div id="adding-new-pdi-step" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Adding new PDI step</h2>
<p>Adding and registering a new <strong>Pentaho Data Integration</strong> Step is a straightforward process which has been streamlined by the design of the BICenter project. A list of all available PDI Steps can be found in this <a href="https://wiki.pentaho.com/display/EAI/Pentaho+Data+Integration+Steps">link</a>.</p>
<p>After selecting the Step to be added, the following is the process required to add said step into the system.</p>
<ol style="list-style-type: decimal">
<li>Register the new step on the <code>public &gt; editor &gt; diagrameditor.xml</code> file.</li>
<li>Add a new object to <code>conf &gt; configuration.json</code> under the subsection pertaining to the new component’s type with the desired component properties.</li>
<li>If necessary, add extra functionality to the <em>submitClick</em> method on the <code>app &gt; assets &gt; javascripts &gt; step &gt; stepController.js</code> or the <em>applyChanges</em> method on <code>app &gt; assets &gt; javascripts &gt; services &gt; step.js</code>.</li>
<li>Create a new class on <code>app &gt; diSdk &gt; step &gt; parser</code> with the appropriate name.</li>
<li>If the component requires pre-processing or extra logic you can alter the <em>decodeStep</em> method on <code>app &gt; diSdk &gt; step &gt; AbstractStep.java</code></li>
</ol>
<div id="example-2" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Example</h3>
<p>The following is an example of how to add the CSVFileInput component. For more information about this component’s functioning you can check out this <a href="https://wiki.pentaho.com/display/EAI/CSV+File+Input">link</a>.</p>
<ol style="list-style-type: decimal">
<li>Firstly, we have to add the following line to <code>public &gt; editor &gt; diagrameditor.xml</code></li>
</ol>
<pre><code>&lt;add as=&quot;CSV File Input&quot; template=&quot;CSVInput&quot; icon=&quot;/assets/images/editor/rectangle.gif&quot;/&gt;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Next we’ll have to register the component’s properties on the <code>conf &gt; configuration.json</code> file. As the CSV File Input step is an Input type component, we’ll be registering it under the Input Components. We’ll be naming this object the same name we used on the <code>template</code> field on the prior step. Note that the <code>shortName</code> field should have a name that goes in accordance with the naming specified by the Pentaho Kettle library (in our specific case, this can be seen in this <a href="https://javadoc.pentaho.com/kettle/org/pentaho/di/trans/steps/csvinput/CsvInputMeta.html">link</a>). Under the <code>componentProperties</code> array we can specify the multiple inputs and fields of our component.</li>
</ol>
<pre><code>{
          &quot;name&quot;: &quot;CSVInput&quot;,
          &quot;description&quot;: &quot;CSV File Input&quot;,
          &quot;shortName&quot;: &quot;csvInput&quot;,
          &quot;componentProperties&quot;: [
            {
              &quot;name&quot;: &quot;Step Name&quot;,
              &quot;shortName&quot;: &quot;stepName&quot;,
              &quot;type&quot;: &quot;input&quot;
            },
            {
              &quot;name&quot;: &quot;File Name&quot;,
              &quot;shortName&quot;: &quot;fileName&quot;,
              &quot;type&quot;: &quot;fileinput&quot;
            },
            {
              &quot;name&quot;: &quot;Delimiter&quot;,
              &quot;shortName&quot;: &quot;delimiter&quot;,
              &quot;type&quot;: &quot;input&quot;
            },
            {
              &quot;name&quot;: &quot;Enclosure&quot;,
              &quot;shortName&quot;: &quot;enclosure&quot;,
              &quot;type&quot;: &quot;input&quot;
            },
            {
              &quot;name&quot;: &quot;NIO Buffer Size&quot;,
              &quot;shortName&quot;: &quot;bufferSize&quot;,
              &quot;type&quot;: &quot;number&quot;
            },
            {
              &quot;name&quot;: &quot;File Encoding&quot;,
              &quot;shortName&quot;: &quot;encoding&quot;,
              &quot;type&quot;: &quot;select&quot;,
              &quot;componentMetadatas&quot;: [
                {
                  &quot;value&quot;: &quot;UTF-8&quot;,
                  &quot;name&quot;: &quot;UTF-8&quot;
                },
                {
                  &quot;value&quot;: &quot;ANSI&quot;,
                  &quot;name&quot;: &quot;ANSI&quot;
                }
              ]
            },
            {
              &quot;name&quot;: &quot;Lazy Conversion?&quot;,
              &quot;shortName&quot;: &quot;lazyConversionActive&quot;,
              &quot;type&quot;: &quot;checkbox&quot;
            }
          ]
        }
}</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>As BICenter is already prepared to receive files and all of our CSVInput’s parameters, we can skip this step.</p></li>
<li><p>Now we have to create a new class on the <code>app &gt; diSdk &gt; step &gt; parser</code> directory. This can simply be done by copying any of the other classes already present in the folder. Don’t worry about the lack of logic in this class, as this serves as a mere extension of the AbstractStep class, which itself contains all logic needed to communicate with the PDI, used in order to allow our component to be detected and processed.</p></li>
</ol>
<pre><code>package diSdk.step.parser;

import diSdk.step.AbstractStep;
import models.Step;
import org.pentaho.di.trans.step.StepMetaInterface;
import org.w3c.dom.Element;

public class CSVInput extends AbstractStep {
    @Override
    public void decode(StepMetaInterface stepMetaInterface, Step step) throws Exception {

    }

    @Override
    public Element encode(StepMetaInterface stepMetaInterface) throws Exception {
        return null;
    }
}</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>As we want our system to automatically detect the CSV’s fields automatically without the users having to manually introduce them themselves, we have to add some logic to the <em>decodeStep</em> method on <code>app &gt; diSdk &gt; step &gt; AbstractStep.java</code> which will do an initial read of the file in order to extrapolate it’s columns’ names. This can be done by creating a new method on this class and adding it to the <em>decodeStep</em> method, or by injecting the logic directly into the function.</li>
</ol>
<pre><code>// If dealing with CSVFileInput get the input fields and define them
                        if (shortName.equals(&quot;InputFields&quot;)) {
                            if (fileName == null) {
                                Optional&lt;StepProperty&gt; fileNameStepProperty = stepProperties.stream()
                                        .filter(stepProperty -&gt; stepProperty.getComponentProperty().getShortName().equalsIgnoreCase(&quot;Filename&quot;))
                                        .findFirst();

                                if (!fileNameStepProperty.isPresent())
                                    continue;
                                fileName = fileNameStepProperty.get().getValue();
                            }

                            if (delimiter == null) {
                                Optional&lt;StepProperty&gt; delimiterStepProperty = stepProperties.stream()
                                        .filter(stepProperty -&gt; stepProperty.getComponentProperty().getShortName().equalsIgnoreCase(&quot;Delimiter&quot;))
                                        .findFirst();

                                if (!delimiterStepProperty.isPresent())
                                    continue;
                                delimiter = delimiterStepProperty.get().getValue();
                            }

                            try {
                                BufferedReader br = new BufferedReader(new FileReader(fileName));
                                String header = br.readLine();

                                String[] fields = new String[0];
                                if (header != null) {
                                    fields = header.split(delimiter);
                                }

                                TextFileInputField[] value = new TextFileInputField[fields.length];
                                for (int i = 0; i &lt; fields.length; i++) {
                                    String field = fields[i];
                                    value[i] = new TextFileInputField();
                                    value[i].setName(field);
                                    System.out.println(field);
                                }

                                // Invoke the current method with the StepProperty value.
                                invokeMethod(stepMetaInterface, method, value, databases);

                            } catch (FileNotFoundException e) {

                            }</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="to-do.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["BIcenter.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
